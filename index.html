<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta
      name="description"
      content="–û—Ñ–ª–∞–π–Ω-—Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –¥–ª—è —Ñ–∏—Ç–Ω–µ—Å-—Å—Ç—É–¥–∏–π —Å –∞–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –∏ —Ä–µ–∑–µ—Ä–≤–Ω—ã–º –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ–º"
    />
    <title>–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ —Å—Ç—É–¥–∏–∏</title>
    <link rel="manifest" href="manifest.webmanifest" />
    <meta name="theme-color" content="#ffffff" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="default" />
    <meta name="apple-mobile-web-app-title" content="–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ —Å—Ç—É–¥–∏–∏" />
    <link rel="apple-touch-icon" href="icons/icon-192.png" />
    <link rel="icon" type="image/png" href="icons/icon-192.png" />

    <!-- Google Fonts —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –∫–∏—Ä–∏–ª–ª–∏—Ü—ã -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Alumni+Sans:ital,wght@0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Montserrat:ital,wght@0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Open+Sans:ital,wght@0,300;0,400;0,500;0,600;0,700;0,800;1,300;1,400;1,500;1,600;1,700;1,800&family=PT+Sans:ital,wght@0,400;0,700;1,400;1,700&family=Oswald:wght@300;400;500;600;700&family=Raleway:ital,wght@0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Noto+Sans:ital,wght@0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Roboto:ital,wght@0,300;0,400;0,500;0,700;0,900;1,300;1,400;1,500;1,700;1,900&family=Inter:wght@300;400;500;600;700;800;900&display=swap"
      rel="stylesheet"
    />

    <link rel="stylesheet" href="./styles.css" />
    <script src="./html-to-image.js"></script>
    <script src="./html2canvas.min.js"></script>
    <script defer src="./app.js"></script>
    <style>
      /* –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è UX */
      .sr-only {
        position: absolute;
        width: 1px;
        height: 1px;
        padding: 0;
        margin: -1px;
        overflow: hidden;
        clip: rect(0, 0, 0, 0);
        white-space: nowrap;
        border: 0;
      }

      /* –£–ª—É—á—à–µ–Ω–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ */
      @media (max-width: 768px) {
        .topbar {
          flex-direction: column;
          align-items: flex-start;
          gap: 16px;
        }

        .toolbar {
          width: 100%;
          overflow-x: auto;
          padding-bottom: 8px;
        }

        .toolbar button {
          flex-shrink: 0;
        }

        .controls {
          overflow-x: auto;
        }

        .row {
          flex-wrap: nowrap;
          min-width: max-content;
        }
      }

      /* –£–ª—É—á—à–µ–Ω–∏—è –¥–ª—è —ç–∫—Å–ø–æ—Ä—Ç–∞ */
      .export-mode .event .grab,
      .export-mode .empty-slot,
      .export-mode .day-actions {
        display: none !important;
      }

      .export-mode .schedule-wrap {
        border: 1px solid var(--border);
      }

      /* –°—Ç–∏–ª–∏ –¥–ª—è –º–æ–±–∏–ª—å–Ω–æ–π PWA */
      @media (display-mode: standalone) {
        body {
          padding-top: env(safe-area-inset-top);
          padding-bottom: env(safe-area-inset-bottom);
        }
      }
    </style>
  </head>
  <body>
    <div class="app" id="appRoot">
      <header class="topbar">
        <div class="brand">
          <div class="logo" aria-hidden="true">FS</div>
          <div class="title">
            <h1>
              –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ —Å—Ç—É–¥–∏–∏
              <span class="sr-only">
                - –û—Ñ–ª–∞–π–Ω –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å –∞–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º</span
              >
            </h1>
            <div class="sub">
              3 —Ä–µ–∂–∏–º–∞ –æ—Ç–æ–±—Ä–∞–∂–∞–µ–º–∞—è ¬∑ –∫–∞—Å—Ç–æ–º–Ω–∞—è —Ç–µ–º–∞/—à—Ä–∏—Ñ—Ç—ã  ¬∑ –º–æ–±–∏–ª—å–Ω–∞—è –∞–¥–∞–ø—Ç–∞—Ü–∏—è
            </div>
          </div>
        </div>

        <div class="toolbar">
          <button
            class="primary"
            id="btnAdd"
            aria-label="–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤–æ–µ –∑–∞–Ω—è—Ç–∏–µ"
          >
            <span class="mobile-only">+</span>
            <span class="desktop-only">–î–æ–±–∞–≤–∏—Ç—å</span>
          </button>
          <button id="btnSettings" aria-label="–û—Ç–∫—Ä—ã—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏">
            <span class="mobile-only">‚öô</span>
            <span class="desktop-only">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</span>
          </button>
          <button
            id="btnUndo"
            disabled
            aria-label="–û—Ç–º–µ–Ω–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω–µ–µ –¥–µ–π—Å—Ç–≤–∏–µ"
          >
            <span class="mobile-only">‚Ü∂</span>
            <span class="desktop-only">Undo</span>
          </button>
          <button
            id="btnRedo"
            disabled
            aria-label="–ü–æ–≤—Ç–æ—Ä–∏—Ç—å –æ—Ç–º–µ–Ω–µ–Ω–Ω–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ"
          >
            <span class="mobile-only">‚Ü∑</span>
            <span class="desktop-only">Redo</span>
          </button>
          <button
            id="btnExportPng"
            aria-label="–≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –≤ PNG –¥–ª—è —Å–æ—Ü—Å–µ—Ç–µ–π"
          >
            <span class="mobile-only">üñºÔ∏è</span>
            <span class="desktop-only">PNG –≠–∫—Å–ø–æ—Ä—Ç</span>
          </button>
          <button id="btnExportJson" aria-label="–≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –≤ JSON">
            <span class="mobile-only">üìÅ</span>
            <span class="desktop-only">JSON –≠–∫—Å–ø–æ—Ä—Ç</span>
          </button>
          <button id="btnImportJson" aria-label="–ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –∏–∑ JSON">
            <span class="mobile-only">üì•</span>
            <span class="desktop-only">–ò–º–ø–æ—Ä—Ç JSON</span>
          </button>
          <button
            class="danger"
            id="btnClearAll"
            aria-label="–û—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ –∑–∞–Ω—è—Ç–∏—è"
          >
            <span class="mobile-only">üóëÔ∏è</span>
            <span class="desktop-only">–û—á–∏—Å—Ç–∏—Ç—å –≤—Å—ë</span>
          </button>
          <input type="file" id="fileInput" accept="application/json" hidden />
        </div>
      </header>

      <section class="controls" aria-label="–§–∏–ª—å—Ç—Ä—ã –∏ –ø–æ–∏—Å–∫">
        <div class="row">
          <div class="group" id="dayGroup"></div>
          <div class="group" id="timeGroup"></div>
          <div class="stats" id="stats"></div>
        </div>

        <div class="row mt10">
          <div class="group" id="dirGroup"></div>
          <div class="search">
            <span class="label">–ü–æ–∏—Å–∫</span>
            <input
              id="q"
              type="text"
              placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ / —Ç—Ä–µ–Ω–µ—Ä / –∫–∞–±./–∑–∞–ª..."
              aria-label="–ü–æ–∏—Å–∫ –∑–∞–Ω—è—Ç–∏–π –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é, —Ç—Ä–µ–Ω–µ—Ä—É –∏–ª–∏ –∫–∞–±–∏–Ω–µ—Ç—É"
            />
          </div>
        </div>
      </section>

      <section class="schedule-wrap" aria-label="–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –∑–∞–Ω—è—Ç–∏–π">
        <div class="schedule" id="schedule"></div>
        <div class="empty-global" id="emptyHint" hidden>
          –ü–æ–∫–∞ –Ω–µ—Ç –∑–∞–Ω—è—Ç–∏–π. –ù–∞–∂–º–∏—Ç–µ ¬´–î–æ–±–∞–≤–∏—Ç—å¬ª –∏–ª–∏ –∫–ª–∏–∫–Ω–∏—Ç–µ –ø–æ —è—á–µ–π–∫–µ.
        </div>
      </section>
    </div>

    <!-- Event modal -->
    <div
      class="backdrop"
      id="eventBackdrop"
      role="dialog"
      aria-modal="true"
      aria-labelledby="eventTitle"
      hidden
    >
      <div class="modal">
        <header class="modal-head">
          <h2 id="eventTitle">–ó–∞–Ω—è—Ç–∏–µ</h2>
          <button
            class="ghost"
            id="btnCloseEvent"
            title="–ó–∞–∫—Ä—ã—Ç—å"
            aria-label="–ó–∞–∫—Ä—ã—Ç—å –æ–∫–Ω–æ"
          >
            √ó
          </button>
        </header>

        <div class="modal-body">
          <input type="hidden" id="evId" />
          <input type="hidden" id="evDay" />

          <div class="grid2">
            <div class="field">
              <label for="evName">–ù–∞–∑–≤–∞–Ω–∏–µ –∑–∞–Ω—è—Ç–∏—è</label>
              <textarea
                id="evName"
                rows="3"
                maxlength="150"
                placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä, ¬´–ô–æ–≥–∞ –¥–ª—è –Ω–∞—á–∏–Ω–∞—é—â–∏—Ö¬ª"
                required
                aria-required="true"
                aria-describedby="nameHelp"
                style="resize: vertical; min-height: 70px; max-height: 150px"
              ></textarea>
              <div class="sr-only" id="nameHelp">
                –£–∫–∞–∂–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –∑–∞–Ω—è—Ç–∏—è (–¥–æ 100 —Å–∏–º–≤–æ–ª–æ–≤)
              </div>
            </div>
            <div class="field">
              <label for="evDir">–ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ</label>
              <select id="evDir" aria-describedby="dirHelp"></select>
              <div class="sr-only" id="dirHelp">
                –í—ã–±–µ—Ä–∏—Ç–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–ª–∏ —Å–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤–æ–µ –Ω–∏–∂–µ
              </div>
              <div class="mt6" id="dirPreviewWrap"></div>
            </div>
          </div>

          <div class="grid2">
            <div class="field">
              <label for="evStart">–í—Ä–µ–º—è –Ω–∞—á–∞–ª–∞ (HH:MM)</label>
              <input
                id="evStart"
                type="time"
                step="60"
                aria-describedby="timeHelp"
              />
              <div class="sr-only" id="timeHelp">
                –§–æ—Ä–º–∞—Ç —á–∞—Å–æ–≤ –∏ –º–∏–Ω—É—Ç, –Ω–∞–ø—Ä–∏–º–µ—Ä 09:00
              </div>
            </div>
            <div class="field">
              <label for="evDur">–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å, –º–∏–Ω—É—Ç</label>
              <input
                id="evDur"
                type="number"
                min="1"
                step="1"
                aria-describedby="durHelp"
              />
              <div class="sr-only" id="durHelp">
                –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å 1 –º–∏–Ω—É—Ç–∞
              </div>
            </div>
          </div>

          <div class="grid2">
            <div class="field">
              <label for="evCoach">–¢—Ä–µ–Ω–µ—Ä</label>
              <select id="evCoach" aria-describedby="coachHelp"></select>
              <div class="sr-only" id="coachHelp">
                –í—ã–±–µ—Ä–∏—Ç–µ —Ç—Ä–µ–Ω–µ—Ä–∞ –∏–∑ —Å–ø–∏—Å–∫–∞
              </div>
            </div>
            <div class="field">
              <label for="evRoom">–ö–∞–±./–∑–∞–ª (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)</label>
              <input id="evRoom" type="text" placeholder="–ö–∞–±. 3 / –ó–∞–ª A" />
            </div>
          </div>

          <details class="details" id="dirDetails">
            <summary id="dirDetailsSummary">
              ‚ûï –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤–æ–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
            </summary>

            <!-- –†–µ–∂–∏–º —Å–æ–∑–¥–∞–Ω–∏—è -->
            <div id="dirCreateMode">
              <div class="grid2 mt10">
                <input
                  id="newDirName"
                  type="text"
                  placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ, –Ω–∞–ø—Ä–∏–º–µ—Ä ¬´–°—Ç—Ä–µ—Ç—á–∏–Ω–≥¬ª"
                  aria-label="–ù–∞–∑–≤–∞–Ω–∏–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è"
                />
                <input
                  id="newDirColor"
                  type="color"
                  value="#ef4444"
                  aria-label="–¶–≤–µ—Ç –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è"
                />
              </div>
              <div
                class="swatches mt10"
                id="swatches"
                role="list"
                aria-label="–ü–∞–ª–∏—Ç—Ä–∞ —Ü–≤–µ—Ç–æ–≤"
              ></div>
              <div
                id="newDirPreview"
                class="preview mt10"
                style="display: none"
                aria-live="polite"
              ></div>
            </div>

            <!-- –†–µ–∂–∏–º —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (–¥–æ–±–∞–≤–∏–º –ø–æ–∑–∂–µ) -->
            <div id="dirEditMode" style="display: none">
              <div class="grid2 mt10">
                <input
                  id="editDirName"
                  type="text"
                  placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è"
                />
                <input id="editDirColor" type="color" value="#ef4444" />
              </div>
              <div class="swatches mt10" id="editSwatches"></div>
              <div id="editDirPreview" class="preview mt10"></div>
              <div class="mt10" style="display: flex; gap: 8px">
                <button type="button" class="primary" id="btnSaveEditDir">
                  ‚úì –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è
                </button>
                <button type="button" class="ghost" id="btnCancelEditDir">
                  –û—Ç–º–µ–Ω–∞
                </button>
              </div>
            </div>
          </details>

          <div class="field">
            <label for="evNotes">–ó–∞–º–µ—Ç–∫–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)</label>
            <textarea
              id="evNotes"
              placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: —É—Ä–æ–≤–µ–Ω—å, –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å..."
            ></textarea>
          </div>

          <div
            class="warning"
            id="conflicts"
            style="display: none"
            role="alert"
            aria-live="assertive"
          ></div>
        </div>

        <footer class="modal-foot">
          <div class="left-actions">
            <button
              class="danger"
              id="btnDelete"
              style="display: none"
              aria-label="–£–¥–∞–ª–∏—Ç—å –∑–∞–Ω—è—Ç–∏–µ"
            >
              –£–¥–∞–ª–∏—Ç—å
            </button>
            <button
              id="btnDuplicate"
              style="display: none"
              aria-label="–°–æ–∑–¥–∞—Ç—å –∫–æ–ø–∏—é –∑–∞–Ω—è—Ç–∏—è"
            >
              –î—É–±–ª–∏—Ä–æ–≤–∞—Ç—å
            </button>
          </div>
          <div class="right-actions">
            <button class="ghost" id="btnCancel">–û—Ç–º–µ–Ω–∞</button>
            <button class="primary" id="btnSave">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
          </div>
        </footer>
      </div>
    </div>

    <!-- Settings modal -->
    <div
      class="backdrop"
      id="settingsBackdrop"
      role="dialog"
      aria-modal="true"
      aria-labelledby="settingsTitle"
      hidden
    >
      <div class="modal modal-wide">
        <header class="modal-head">
          <h2 id="settingsTitle">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</h2>
          <button class="ghost" id="btnCloseSettings" title="–ó–∞–∫—Ä—ã—Ç—å" aria-label="–ó–∞–∫—Ä—ã—Ç—å">‚úï</button>
        </header>

        <div class="modal-body">
          <div class="tabs" role="tablist" aria-label="–ù–∞—Å—Ç—Ä–æ–π–∫–∏">
            <button class="tab active" id="tabSchedule" type="button" role="tab" aria-selected="true" aria-controls="panelSchedule">
              –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ
            </button>
            <button class="tab" id="tabDisplay" type="button" role="tab" aria-selected="false" aria-controls="panelDisplay">
              –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ
            </button>
            <button class="tab" id="tabFont" type="button" role="tab" aria-selected="false" aria-controls="panelFont">
              –®—Ä–∏—Ñ—Ç—ã
            </button>
            <button class="tab" id="tabTheme" type="button" role="tab" aria-selected="false" aria-controls="panelTheme">
              –¢–µ–º–∞
            </button>
          </div>

          <div class="tab-panel active" id="panelSchedule" role="tabpanel" aria-labelledby="tabSchedule">
            <div class="grid2">
              <div class="field">
                <label for="setStart">–ù–∞—á–∞–ª–æ –¥–Ω—è</label>
                <input id="setStart" type="time" step="60" aria-describedby="startHelp" />
                <div class="sr-only" id="startHelp">–í—Ä–µ–º—è –Ω–∞—á–∞–ª–∞ —Ä–∞–±–æ—á–µ–≥–æ –¥–Ω—è</div>
              </div>

              <div class="field">
                <label for="setEnd">–ö–æ–Ω–µ—Ü –¥–Ω—è</label>
                <input id="setEnd" type="time" step="60" aria-describedby="endHelp" />
                <div class="sr-only" id="endHelp">–í—Ä–µ–º—è –æ–∫–æ–Ω—á–∞–Ω–∏—è —Ä–∞–±–æ—á–µ–≥–æ –¥–Ω—è</div>
              </div>
            </div>

            <div class="grid2">
              <div class="field">
                <label for="setDefaultDur">–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (–º–∏–Ω)</label>
                <input id="setDefaultDur" type="number" min="1" step="1" aria-describedby="durDefaultHelp" />
                <div class="sr-only" id="durDefaultHelp">–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –Ω–æ–≤–æ–≥–æ –∑–∞–Ω—è—Ç–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é</div>
              </div>

              <div class="field">
                <label>&nbsp;</label>
                <div class="note" role="note">
                  –ü—Ä–∞–≤–∏–ª–æ: –∑–∞–Ω—è—Ç–∏–µ –¥–æ–ª–∂–Ω–æ –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–æ–º–µ—â–∞—Ç—å—Å—è –≤ –æ–¥–Ω—É –∫–ª–µ—Ç–∫—É; –≤ –æ–¥–Ω–æ–π –∫–ª–µ—Ç–∫–µ –º–∞–∫—Å–∏–º—É–º 2 –∑–∞–Ω—è—Ç–∏—è.
                </div>
              </div>
            </div>
          </div>

          <!-- DISPLAY -->
          <div class="tab-panel" id="panelDisplay" role="tabpanel" aria-labelledby="tabDisplay" hidden>
            <div class="grid2">
              <div class="field">
                <label for="dispCellView">–í–∏–¥ –≤–Ω—É—Ç—Ä–∏ –∫–ª–µ—Ç–∫–∏</label>
                <select id="dispCellView" aria-describedby="cellViewHelp">
                  <option value="timeline">–¢–∞–π–º–ª–∞–π–Ω</option>
                  <option value="list">–°–ø–∏—Å–æ–∫</option>
                  <option value="compact">–ö–æ–º–ø–∞–∫—Ç–Ω—ã–π</option>
                </select>
                <div class="sr-only" id="cellViewHelp">–°–ø–æ—Å–æ–± –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∑–∞–Ω—è—Ç–∏–π –≤–Ω—É—Ç—Ä–∏ —è—á–µ–π–∫–∏</div>
              </div>

              <div class="field">
                <label for="dispCardMode">–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ –∫–∞—Ä—Ç–æ—á–∫–∏</label>
                <select id="dispCardMode" aria-describedby="cardModeHelp">
                  <option value="name">–¢–æ–ª—å–∫–æ –Ω–∞–∑–≤–∞–Ω–∏–µ</option>
                  <option value="namecoachroom">–ù–∞–∑–≤–∞–Ω–∏–µ + —Ç—Ä–µ–Ω–µ—Ä + –∫–∞–±.</option>
                  <option value="nametimecoachroom">–ù–∞–∑–≤–∞–Ω–∏–µ + –≤—Ä–µ–º—è + —Ç—Ä–µ–Ω–µ—Ä + –∫–∞–±.</option>
                </select>
                <div class="sr-only" id="cardModeHelp">–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è, –æ—Ç–æ–±—Ä–∞–∂–∞–µ–º–∞—è –Ω–∞ –∫–∞—Ä—Ç–æ—á–∫–µ –∑–∞–Ω—è—Ç–∏—è</div>
              </div>
            </div>

            <div class="grid2">
              <div class="field">
                <label for="dispShowNotes">–ó–∞–º–µ—Ç–∫–∏ (tooltip)</label>
                <select id="dispShowNotes" aria-describedby="notesHelp">
                  <option value="yes">–ü–æ–∫–∞–∑—ã–≤–∞—Ç—å</option>
                  <option value="no">–°–∫—Ä—ã—Ç—å</option>
                </select>
                <div class="sr-only" id="notesHelp">–ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –ª–∏ –∑–∞–º–µ—Ç–∫–∏ –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏</div>
              </div>

              <div class="field">
                <label for="dispShowEmptyHint">–ü–æ–¥—Å–∫–∞–∑–∫–∞ "–ö–ª–∏–∫ –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è"</label>
                <select id="dispShowEmptyHint" aria-describedby="hintHelp">
                  <option value="yes">–ü–æ–∫–∞–∑—ã–≤–∞—Ç—å</option>
                  <option value="no">–°–∫—Ä—ã—Ç—å</option>
                </select>
                <div class="sr-only" id="hintHelp">–ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –ª–∏ –ø–æ–¥—Å–∫–∞–∑–∫—É –≤ –ø—É—Å—Ç—ã—Ö —è—á–µ–π–∫–∞—Ö</div>
              </div>
            </div>

            <!-- NEW: show today + day width -->
            <div class="grid2">
              <div class="field">
                <label for="dispShowToday">–ü–æ–¥—Å–≤–µ—Ç–∫–∞ "—Å–µ–≥–æ–¥–Ω—è"</label>
                <select id="dispShowToday" aria-describedby="todayHelp">
                  <option value="yes">–ü–æ–∫–∞–∑—ã–≤–∞—Ç—å</option>
                  <option value="no">–°–∫—Ä—ã—Ç—å</option>
                </select>
                <div class="sr-only" id="todayHelp">–ü–æ–¥—Å–≤–µ—á–∏–≤–∞—Ç—å –ª–∏ —Ç–µ–∫—É—â–∏–π –¥–µ–Ω—å –≤ —Å–µ—Ç–∫–µ</div>
              </div>

              <div class="field">
                <label for="dispDayWidth">–®–∏—Ä–∏–Ω–∞ —Å–ª–æ—Ç–∞ (px)</label>
                <input
                  id="dispDayWidth"
                  type="number"
                  min="0"
                  step="1"
                  placeholder="0 = –∞–≤—Ç–æ"
                  aria-describedby="dayWidthHelp"
                />
                <div class="sr-only" id="dayWidthHelp">0 = –∞–≤—Ç–æ; –±–æ–ª—å—à–µ 0 = —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —à–∏—Ä–∏–Ω–∞ –¥–Ω—è</div>
              </div>
            </div>

            <!-- NEW: padding -->
            <div class="grid2">
              <div class="field">
                <label for="dispCellPad">–û—Ç—Å—Ç—É–ø –≤–Ω—É—Ç—Ä–∏ —è—á–µ–π–∫–∏ (px)</label>
                <input id="dispCellPad" type="number" min="0" step="1" aria-describedby="padHelp" />
                <div class="sr-only" id="padHelp">–û—Ç—Å—Ç—É–ø—ã –≤–Ω—É—Ç—Ä–∏ —è—á–µ–π–∫–∏/—Å–ª–æ—Ç–∞ (–≤–ª–∏—è–µ—Ç –Ω–∞ –ø–ª–æ—Ç–Ω–æ—Å—Ç—å —Å–µ—Ç–∫–∏)</div>
              </div>

              <div class="field">
                <label>&nbsp;</label>
                <div class="note" role="note">
                  –ê–≤—Ç–æ‚Äë—Ä–∞–∑–º–µ—Ä —Ç–µ–∫—Å—Ç–∞: –µ—Å–ª–∏ –≤ –∫–ª–µ—Ç–∫–µ 1 –∑–∞–Ω—è—Ç–∏–µ ‚Äî –∫—Ä—É–ø–Ω–µ–µ; –µ—Å–ª–∏ 2 ‚Äî –º–µ–Ω—å—à–µ (—Å–º. "–®—Ä–∏—Ñ—Ç—ã").
                </div>
              </div>
            </div>
          </div>

          <!-- FONT -->
          <div class="tab-panel" id="panelFont" role="tabpanel" aria-labelledby="tabFont" hidden>
            <div class="grid2">
              <div class="field">
                <label for="fontFamily">–®—Ä–∏—Ñ—Ç —Ç–∞–±–ª–∏—Ü—ã</label>
                <select id="fontFamily" aria-describedby="fontFamilyHelp">
                  <option value="system">System UI</option>
                  <option value="alumni">Alumni Sans</option>
                  <option value="montserrat">Montserrat</option>
                  <option value="opensans">Open Sans</option>
                  <option value="ptsans">PT Sans</option>
                  <option value="oswald">Oswald</option>
                  <option value="raleway">Raleway</option>
                  <option value="noto">Noto Sans</option>
                  <option value="inter">Inter</option>
                  <option value="roboto">Roboto</option>
                  <option value="mono">Monospace</option>
                </select>
                <div class="sr-only" id="fontFamilyHelp">–í—ã–±–æ—Ä —à—Ä–∏—Ñ—Ç–∞ –¥–ª—è —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è</div>
              </div>

              <div class="field">
                <label for="fontLineHeight">Line-height (–∫–∞—Ä—Ç–æ—á–∫–∞)</label>
                <input id="fontLineHeight" type="number" min="1.0" max="1.6" step="0.05" aria-describedby="lineHeightHelp" />
                <div class="sr-only" id="lineHeightHelp">–ú–µ–∂—Å—Ç—Ä–æ—á–Ω—ã–π –∏–Ω—Ç–µ—Ä–≤–∞–ª –≤ –∫–∞—Ä—Ç–æ—á–∫–∞—Ö</div>
              </div>
            </div>

            <div class="grid2">
              <div class="field">
                <label for="fontTitle1">–ù–∞–∑–≤–∞–Ω–∏–µ (1 –∑–∞–Ω—è—Ç–∏–µ), px</label>
                <input id="fontTitle1" type="number" min="10" max="18" step="1" aria-describedby="title1Help" />
                <div class="sr-only" id="title1Help">–†–∞–∑–º–µ—Ä —à—Ä–∏—Ñ—Ç–∞ –Ω–∞–∑–≤–∞–Ω–∏—è –ø—Ä–∏ –æ–¥–Ω–æ–º –∑–∞–Ω—è—Ç–∏–∏ –≤ —è—á–µ–π–∫–µ</div>
              </div>

              <div class="field">
                <label for="fontTitle2">–ù–∞–∑–≤–∞–Ω–∏–µ (2 –∑–∞–Ω—è—Ç–∏—è), px</label>
                <input id="fontTitle2" type="number" min="9" max="16" step="1" aria-describedby="title2Help" />
                <div class="sr-only" id="title2Help">–†–∞–∑–º–µ—Ä —à—Ä–∏—Ñ—Ç–∞ –Ω–∞–∑–≤–∞–Ω–∏—è –ø—Ä–∏ –¥–≤—É—Ö –∑–∞–Ω—è—Ç–∏—è—Ö –≤ —è—á–µ–π–∫–µ</div>
              </div>
            </div>

            <div class="grid2">
              <div class="field">
                <label for="fontMeta1">–ú–µ—Ç–∞ (1 –∑–∞–Ω—è—Ç–∏–µ), px</label>
                <input id="fontMeta1" type="number" min="9" max="14" step="1" aria-describedby="meta1Help" />
                <div class="sr-only" id="meta1Help">–†–∞–∑–º–µ—Ä —à—Ä–∏—Ñ—Ç–∞ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –ø—Ä–∏ –æ–¥–Ω–æ–º –∑–∞–Ω—è—Ç–∏–∏</div>
              </div>

              <div class="field">
                <label for="fontMeta2">–ú–µ—Ç–∞ (2 –∑–∞–Ω—è—Ç–∏—è), px</label>
                <input id="fontMeta2" type="number" min="8" max="13" step="1" aria-describedby="meta2Help" />
                <div class="sr-only" id="meta2Help">–†–∞–∑–º–µ—Ä —à—Ä–∏—Ñ—Ç–∞ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –ø—Ä–∏ –¥–≤—É—Ö –∑–∞–Ω—è—Ç–∏—è—Ö</div>
              </div>
            </div>

            <div class="grid2">
              <div class="field">
                <label for="fontWeightTitle">–ñ–∏—Ä–Ω–æ—Å—Ç—å –Ω–∞–∑–≤–∞–Ω–∏—è</label>
                <select id="fontWeightTitle" aria-describedby="weightTitleHelp">
                  <option value="700">700</option>
                  <option value="800">800</option>
                  <option value="900">900</option>
                </select>
                <div class="sr-only" id="weightTitleHelp">–ù–∞—Å—ã—â–µ–Ω–Ω–æ—Å—Ç—å —à—Ä–∏—Ñ—Ç–∞ –Ω–∞–∑–≤–∞–Ω–∏—è</div>
              </div>

              <div class="field">
                <label for="fontWeightMeta">–ñ–∏—Ä–Ω–æ—Å—Ç—å –º–µ—Ç–∞</label>
                <select id="fontWeightMeta" aria-describedby="weightMetaHelp">
                  <option value="500">500</option>
                  <option value="600">600</option>
                  <option value="700">700</option>
                </select>
                <div class="sr-only" id="weightMetaHelp">–ù–∞—Å—ã—â–µ–Ω–Ω–æ—Å—Ç—å —à—Ä–∏—Ñ—Ç–∞ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏</div>
              </div>
            </div>

            <div class="note" role="note">–≠—Ç–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –∫ –∫–∞—Ä—Ç–æ—á–∫–∞–º –≤ —Å–µ—Ç–∫–µ.</div>
          </div>

          <!-- THEME -->
          <div class="tab-panel" id="panelTheme" role="tabpanel" aria-labelledby="tabTheme" hidden>
            <div class="grid2">
              <div class="field">
                <label for="themeMode">–†–µ–∂–∏–º —Ç–µ–º—ã</label>
                <select id="themeMode" aria-describedby="themeModeHelp">
                  <option value="auto">–ê–≤—Ç–æ (–ø–æ —Å–∏—Å—Ç–µ–º–µ)</option>
                  <option value="light">–°–≤–µ—Ç–ª–∞—è</option>
                  <option value="dark">–¢—ë–º–Ω–∞—è</option>
                  <option value="custom">–ö–∞—Å—Ç–æ–º–Ω–∞—è</option>
                </select>
                <div class="sr-only" id="themeModeHelp">–†–µ–∂–∏–º —Ü–≤–µ—Ç–æ–≤–æ–π —Ç–µ–º—ã</div>
              </div>

              <div class="field">
                <label for="themePreset">–ü—Ä–µ—Å–µ—Ç –ø–∞–ª–∏—Ç—Ä—ã</label>
                <select id="themePreset" aria-describedby="themePresetHelp"></select>
                <div class="sr-only" id="themePresetHelp">–ì–æ—Ç–æ–≤—ã–µ —Ü–≤–µ—Ç–æ–≤—ã–µ —Å—Ö–µ–º—ã</div>
              </div>
            </div>

            <div class="paletteGrid" id="paletteGrid" role="list" aria-label="–ü–∞–ª–∏—Ç—Ä—ã"></div>
            <div class="hr"></div>

            <div class="grid2">
              <div class="field">
                <label>–ê–∫—Ü–µ–Ω—Ç</label>
                <div class="colorRow">
                  <input id="tAccent" type="color" aria-label="–ê–∫—Ü–µ–Ω—Ç" />
                  <div class="dots" id="dotsAccent" role="list" aria-label="–ê–∫—Ü–µ–Ω—Ç –≤–∞—Ä–∏–∞–Ω—Ç—ã"></div>
                </div>
              </div>

              <div class="field">
                <label>–§–æ–Ω</label>
                <div class="colorRow">
                  <input id="tBg" type="color" aria-label="–§–æ–Ω" />
                  <div class="dots" id="dotsBg" role="list" aria-label="–§–æ–Ω –≤–∞—Ä–∏–∞–Ω—Ç—ã"></div>
                </div>
              </div>
            </div>

            <div class="grid2">
              <div class="field">
                <label>–ö–∞—Ä—Ç–æ—á–∫–∞</label>
                <div class="colorRow">
                  <input id="tCard" type="color" aria-label="–ö–∞—Ä—Ç–æ—á–∫–∞" />
                  <div class="dots" id="dotsCard" role="list" aria-label="–ö–∞—Ä—Ç–æ—á–∫–∞ –≤–∞—Ä–∏–∞–Ω—Ç—ã"></div>
                </div>
              </div>

              <div class="field">
                <label>–¢–µ–∫—Å—Ç</label>
                <div class="colorRow">
                  <input id="tText" type="color" aria-label="–¢–µ–∫—Å—Ç" />
                  <div class="dots" id="dotsText" role="list" aria-label="–¢–µ–∫—Å—Ç –≤–∞—Ä–∏–∞–Ω—Ç—ã"></div>
                </div>
              </div>
            </div>

            <div class="grid2">
              <div class="field">
                <label>–ì—Ä–∞–Ω–∏—Ü—ã</label>
                <div class="colorRow">
                  <input id="tBorder" type="color" aria-label="–ì—Ä–∞–Ω–∏—Ü—ã" />
                  <div class="dots" id="dotsBorder" role="list" aria-label="–ì—Ä–∞–Ω–∏—Ü—ã –≤–∞—Ä–∏–∞–Ω—Ç—ã"></div>
                </div>
              </div>

              <div class="field">
                <label>–®–∞–ø–∫–∞ —Å–µ—Ç–∫–∏</label>
                <div class="colorRow">
                  <input id="tGridHead" type="color" aria-label="–®–∞–ø–∫–∞ —Å–µ—Ç–∫–∏" />
                  <div class="dots" id="dotsGridHead" role="list" aria-label="–®–∞–ø–∫–∞ –≤–∞—Ä–∏–∞–Ω—Ç—ã"></div>
                </div>
              </div>
            </div>

            <div class="grid2">
              <div class="field">
                <label>–ü–æ–¥—Å–≤–µ—Ç–∫–∞ "—Å–µ–π—á–∞—Å"</label>
                <div class="colorRow">
                  <input id="tNowRow" type="color" aria-label="–ü–æ–¥—Å–≤–µ—Ç–∫–∞ —Å–µ–π—á–∞—Å" />
                  <div class="dots" id="dotsNowRow" role="list" aria-label="–°–µ–π—á–∞—Å –≤–∞—Ä–∏–∞–Ω—Ç—ã"></div>
                </div>
              </div>

              <div class="field">
                <label>–ü–æ–¥—Å–≤–µ—Ç–∫–∞ "—Å–µ–≥–æ–¥–Ω—è"</label>
                <div class="colorRow">
                  <input id="tTodayCol" type="color" aria-label="–ü–æ–¥—Å–≤–µ—Ç–∫–∞ —Å–µ–≥–æ–¥–Ω—è" />
                  <div class="dots" id="dotsTodayCol" role="list" aria-label="–°–µ–≥–æ–¥–Ω—è –≤–∞—Ä–∏–∞–Ω—Ç—ã"></div>
                </div>
              </div>
            </div>

            <div class="grid2">
              <div class="field">
                <label for="alphaToday">–ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å "—Å–µ–≥–æ–¥–Ω—è", %</label>
                <input id="alphaToday" type="range" min="0" max="100" step="1" aria-describedby="alphaTodayVal" />
                <div class="mini" id="alphaTodayVal"></div>
              </div>

              <div class="field">
                <label for="alphaNow">–ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å "—Å–µ–π—á–∞—Å", %</label>
                <input id="alphaNow" type="range" min="0" max="100" step="1" aria-describedby="alphaNowVal" />
                <div class="mini" id="alphaNowVal"></div>
              </div>
            </div>

            <div class="grid2">
              <div class="field">
                <label for="alphaEvent">–ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å —Ñ–æ–Ω–∞ –∑–∞–Ω—è—Ç–∏—è, %</label>
                <input id="alphaEvent" type="range" min="20" max="100" step="1" aria-describedby="alphaEventVal" />
                <div class="mini" id="alphaEventVal"></div>
              </div>

              <div class="field">
                <label for="alphaShadow">–ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å —Ç–µ–Ω–∏, %</label>
                <input id="alphaShadow" type="range" min="0" max="100" step="1" aria-describedby="alphaShadowVal" />
                <div class="mini" id="alphaShadowVal"></div>
              </div>
            </div>

            <div class="warning" id="themeWarn" style="display: none;" role="alert" aria-live="polite"></div>

            <div class="actionsRow">
              <button type="button" id="btnThemeReset" aria-label="–°–±—Ä–æ—Å">–°–±—Ä–æ—Å</button>
              <button type="button" id="btnThemeAutoFix" aria-label="–ê–≤—Ç–æ‚Äë–∫–æ–Ω—Ç—Ä–∞—Å—Ç">–ê–≤—Ç–æ‚Äë–∫–æ–Ω—Ç—Ä–∞—Å—Ç</button>
            </div>
          </div>

          <div class="warning" id="settingsWarn" style="display: none;" role="alert" aria-live="assertive"></div>
        </div>

        <footer class="modal-foot">
          <div></div>
          <div class="right-actions">
            <button class="ghost" id="btnSettingsCancel">–û—Ç–º–µ–Ω–∞</button>
            <button class="primary" id="btnSettingsSave">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
          </div>
        </footer>
      </div>
    </div>
    <!-- Export modal -->
    <div
      class="backdrop"
      id="exportBackdrop"
      role="dialog"
      aria-modal="true"
      aria-labelledby="exportTitle"
      hidden
    >
      <div class="modal modal-wide">
        <header class="modal-head">
          <h2 id="exportTitle">–≠–∫—Å–ø–æ—Ä—Ç</h2>
          <button
            class="ghost"
            id="btnCloseExport"
            title="–ó–∞–∫—Ä—ã—Ç—å"
            aria-label="–ó–∞–∫—Ä—ã—Ç—å"
          >
            √ó
          </button>
        </header>

        <div class="modal-body">
          <div class="grid2">
            <div class="field">
              <label for="expPreset">–ü—Ä–µ—Å–µ—Ç</label>
              <select id="expPreset"></select>
            </div>

            <div class="field">
              <label for="expFormat">–§–æ—Ä–º–∞—Ç</label>
              <select id="expFormat">
                <option value="png">PNG</option>
                <option value="jpeg">JPEG</option>
                <option value="svg">SVG</option>
              </select>
            </div>
          </div>

          <div class="grid2" id="expRasterOptions">
            <div class="field">
              <label for="expBg">–§–æ–Ω</label>
              <select id="expBg">
                <option value="auto">–ê–≤—Ç–æ (—Ç–µ–º–∞)</option>
                <option value="transparent">–ü—Ä–æ–∑—Ä–∞—á–Ω—ã–π</option>
                <option value="white">–ë–µ–ª—ã–π</option>
              </select>
            </div>

            <div class="field" id="expJpegWrap" style="display: none">
              <label for="expQuality">–ö–∞—á–µ—Å—Ç–≤–æ JPEG</label>
              <input
                id="expQuality"
                type="range"
                min="60"
                max="100"
                step="1"
                value="92"
              />
              <div class="mini" id="expQualityVal">92</div>
            </div>
          </div>

          <div class="note" id="expHint" role="note">
            –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ (–±–µ–∑ –ø–∞–Ω–µ–ª–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è).
            –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å 1‚Äì2 —Å–µ–∫—É–Ω–¥—ã.
          </div>

          <div class="hr"></div>

          <div class="export-preview">
            <div class="export-preview-frame">
              <img id="expPreviewImg" alt="–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä —ç–∫—Å–ø–æ—Ä—Ç–∞" />
            </div>
          </div>
        </div>

        <footer class="modal-foot">
          <div class="left-actions">
            <button class="ghost" id="btnExpPreview" type="button">
              –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä
            </button>
            <button class="ghost" id="btnExpRotate" type="button">
              –ü–æ–≤–µ—Ä–Ω—É—Ç—å 90¬∞
            </button>
          </div>
          <div class="right-actions">
            <button class="ghost" id="btnExpCancel" type="button">
              –û—Ç–º–µ–Ω–∞
            </button>
            <button class="primary" id="btnExpDownload" type="button">
              –°–∫–∞—á–∞—Ç—å
            </button>
          </div>
        </footer>
      </div>
    </div>

    <div
      class="toasts"
      id="toasts"
      aria-live="polite"
      aria-atomic="false"
    ></div>

    <script>
      // –î–æ–±–∞–≤–ª—è–µ–º –∞—Ç—Ä–∏–±—É—Ç hidden –¥–ª—è –º–æ–¥–∞–ª–æ–∫ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
      document.addEventListener("DOMContentLoaded", function () {
        document.getElementById("eventBackdrop").hidden = false;
        document.getElementById("settingsBackdrop").hidden = false;
        document.getElementById("exportBackdrop").hidden = false;

        // –î–æ–±–∞–≤–ª—è–µ–º CSS –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö/–¥–µ—Å–∫—Ç–æ–ø–Ω—ã—Ö –∫–Ω–æ–ø–æ–∫
        const style = document.createElement("style");
        style.textContent = `
        .mobile-only { display: none; }
        .desktop-only { display: inline; }
        
        @media (max-width: 768px) {
          .mobile-only { display: inline; }
          .desktop-only { display: none; }
        }
        
        @media (min-width: 769px) {
          .mobile-only { display: none; }
          .desktop-only { display: inline; }
        }
      `;
        document.head.appendChild(style);

        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é –¥–ª—è PWA
        if (window.matchMedia("(display-mode: standalone)").matches) {
          setTimeout(() => {
            alert(
              '–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ! –î–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è –Ω–∞–∂–º–∏—Ç–µ –Ω–∞ —è—á–µ–π–∫—É –∏–ª–∏ –∫–Ω–æ–ø–∫—É "–î–æ–±–∞–≤–∏—Ç—å".'
            );
          }, 1000);
        }
      });

      // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∫–∞–∫ PWA
      if ("serviceWorker" in navigator) {
        window.addEventListener("load", function () {
          navigator.serviceWorker.register("./sw.js").then(
            function (registration) {
              console.log(
                "ServiceWorker registration successful with scope: ",
                registration.scope
              );
            },
            function (err) {
              console.log("ServiceWorker registration failed: ", err);
            }
          );
        });
      }
    </script>
  </body>
</html>
